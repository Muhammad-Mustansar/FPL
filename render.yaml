services:
  # FastAPI Backend Service
  - type: web
    name: fpl-backend
    env: docker
    plan: free
    # When using Docker environment Render builds the Dockerfile and uses its CMD
    envVars:
      - key: SERVICE_ROLE
        value: "backend"
      - key: PORT
        value: "8000"

  # Streamlit Frontend Service
  - type: web
    name: fpl-frontend
    env: docker
    plan: free
    envVars:
      - key: SERVICE_ROLE
        value: "frontend"
      - key: PORT
        value: "8501"
      - key: FPL_API_BASE_URL
        fromService: fpl-backend
        property: url
